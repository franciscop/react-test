!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react-dom/test-utils")):"function"==typeof define&&define.amd?define(["exports","react-dom/test-utils"],e):e((t=t||self).$={},t.testUtils)}(this,(function(t,e){"use strict";Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(s,r){return Array.isArray(r)?s.push.apply(s,t.call(r,e-1)):s.push(r),s}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});const s=require("window"),r=require("react-dom"),i=t=>{const e=new s,i=e.document.createElement("div");return i.id="root",e.document.body.appendChild(i),r.render(t,i),i.childNodes[0]};var o=t=>t?t.$$typeof?[i(t)]:(Array.isArray(t)?t:[t]).filter(t=>"object"==typeof t):[],n=t=>{if(!t)throw new Error("expect() should receive an HTMLElement or React Test instance");return t.$$typeof&&(t=o(t)),t.toArray&&(t=t.toArray()),Array.isArray(t)||(t=[t]),t.forEach(t=>{if(!t.nodeName)throw new Error("expect() should receive an HTMLElement or React Test instance")}),t},a=t=>t.cloneNode(!1).outerHTML.replace(/<\/[a-zA-Z0-9-]+>$/,"");const c=t=>`class${t.length>1?"es":""} "${t.join('", "')}"`;const u=t=>t.replace(/\s+/g," ");const f=t=>Object.entries(t).map(([t,e])=>{return`${s=t,s.replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1-$2").toLowerCase()}: ${e}`;var s}),l=t=>{let e=t.split("; ");return e[e.length-1]=e[e.length-1].replace(/;/g,""),e},p=t=>`style${t.length>1?"s":""} [${t.join(", ")}]`;expect.extend({toBeEnabled:function(t){this.affirmative=!this.isNot,t=n(t);for(let e of t){const t=a(e),s=!e.disabled;if(this.affirmative&&!s){const e=`Expected ${t} not to include the attribute "disabled"`;return{pass:!1,message:()=>e}}if(this.isNot&&s){const e=`Expected ${t} to include the attribute "disabled"`;return{pass:!0,message:()=>e}}}return{pass:!this.isNot}},toHaveAttribute:function(t,e,s){this.affirmative=!this.isNot,t=n(t);for(let r of t){const t=[...r.attributes],i=a(r),o=t.some(({name:t,value:r})=>e===t&&(s instanceof RegExp?s.test(r):"boolean"==typeof s?""===r:!s||r===s));let n="";if(s instanceof RegExp?n=" that matches "+s:s&&(n=`="${s}"`),this.affirmative&&!o){const t=`Expected ${i} to have attribute \`${e}\`${n}`;return{pass:!1,message:()=>t}}if(this.isNot&&o){const t=`Expected ${i} not to have attribute \`${e}\`${n}`;return{pass:!0,message:()=>t}}}return{pass:!this.isNot}},toHaveClass:function(t,...e){this.affirmative=!this.isNot,t=n(t);const s=e.flat();for(let e of t){const t=[...e.classList],r=a(e),i=s.filter(e=>t.includes(e)),o=s.filter(e=>!t.includes(e));if(this.affirmative&&i.length<s.length){const t=`Expected ${r} to include ${c(o)}`;return{pass:!1,message:()=>t}}if(this.isNot&&i.length){const t=`Expected ${r} not to include ${c(i)}`;return{pass:!0,message:()=>t}}}return{pass:!this.isNot}},toHaveHtml:function(t,e){this.affirmative=!this.isNot,t=n(t);for(let s of t){const t=a(s),r=s.outerHTML.includes(e.trim());if(this.affirmative&&!r){const s=`Expected ${t} to have \`${e}\``;return{pass:!1,message:()=>s}}if(this.isNot&&r){const s=`Expected ${t} not to have \`${e}\``;return{pass:!0,message:()=>s}}}return{pass:!this.isNot}},toHaveText:function(t,e){this.affirmative=!this.isNot,t=n(t);for(let s of t){const t=s.textContent,r=a(s);if(this.affirmative){if(u(t)!==u(e)){const s=`Expected ${r} to have text "${e}" but it received "${t}"`;return{pass:!1,message:()=>s}}}else if(u(t)===u(e)){const e=`Expected ${r} not to have the text "${t}"`;return{pass:!0,message:()=>e}}}return{pass:!this.isNot}},toHaveValue:function(t,e){if(this.affirmative=!this.isNot,(t=n(t)).length>1)throw new Error("Cannot check multiple elements for values. Please pass only one element.");const s=t[0],r=s.tagName.toLowerCase();if("input"===r&&["checkbox","radio"].includes(s.type))throw new Error('Cannot check .toHaveValue() for input type="checkbox" or type="radio".');const i=a(s);let o=!1;if("input"===r)o="number"===s.type?Number(s.value)===e:s.value===e;else if("textarea"===r)o=s.value===e;else{if("select"!==r)throw new Error("Not a valid element that has a value attribute. Please insert an element that has a value.");o=[...s.options].find(t=>t.selected).value===e}if(this.affirmative&&!o){const t=`Expected ${i} to have value=${e}`;return{pass:!1,message:()=>t}}if(this.isNot&&o){const t=`Expected ${i} not to have value=${e}`;return{pass:!0,message:()=>t}}return{pass:!this.isNot}},toMatchSelector:function(t,e){this.affirmative=!this.isNot,t=n(t);for(let s of t){const t=a(s),r=s.matches(e);if(this.affirmative&&!r){const s=`Expected ${t} to match selector, ${e}`;return{pass:!1,message:()=>s}}if(this.isNot&&r){const s=`Expected ${t} not to match selector, ${e}`;return{pass:!0,message:()=>s}}}return{pass:!this.isNot}},toHaveStyle:function(t,e){this.affirmative=!this.isNot,t=n(t);for(let s of t){const t=a(s),r=Object.entries(s.style._values).map(([t,e])=>`${t}: ${e}`);let i="string"==typeof e?l(e):f(e);if(this.affirmative){const e=i.filter(t=>!r.includes(t));if(e.length){const s=`Expected ${t} to include ${p(e)}`;return{pass:!1,message:()=>s}}}if(this.isNot){const e=i.filter(t=>r.includes(t));if(e.length){const s=`Expected ${t} not to include ${p(e)}`;return{pass:!0,message:()=>s}}}}return{pass:!this.isNot}}});const h=function(t,s={}){return this instanceof h?(this.events=s.events||{},e.act(()=>{window.addEventListener=(t,e)=>{this.events[t]=this.events[t]||[],this.events[t].push(e)},document.addEventListener=(t,e)=>{this.events[t]=this.events[t]||[],this.events[t].push(e)},this.nodes=o(t)}),this):new h(t,s)};h.prototype[Symbol.iterator]=function*(){for(let t of this.nodes)yield t},h.prototype.attr=function(t){const e=this.first();return e&&e.getAttribute(t)},h.prototype.click=function(...t){const e=t.find(t=>"string"==typeof t),s=t.find(t=>"number"==typeof t);return this.find(e).trigger("click",s)},h.prototype.data=function(t){return this.attr("data-"+t)},h.prototype.find=function(t){return t?this.map(e=>[...e.querySelectorAll(t)]):this},h.prototype.get=function(t=0){const e=this.toArray();return t<0&&(t=e.length+t),e[t]},h.prototype.first=function(){return this.get(0)||null},h.prototype.html=function(){const t=this.first();return t?t.outerHTML:""},h.prototype.is=function(t="*"){return this.toArray().some(e=>e.matches(t))},h.prototype.last=function(){return this.get(-1)||null},h.prototype.unique=function(){const t=[];return this.toArray().forEach(e=>{t.includes(e)||t.push(e)}),h(t,this)},h.prototype.map=function(t){return h(this.toArray().map(t).flat().filter(Boolean),this).unique()},h.prototype.text=function(){const t=this.first();return t?t.textContent:""},h.prototype.toArray=function(){return this.nodes};const d=(t,e=[])=>(e.push(t),"BODY"!==t.tagName?d(t.parentNode,e):e),m=t=>{if(!t)return null;let e=Object.entries(t).filter(([t])=>/^__reactProps/.test(t)).map(t=>t[1]).shift();return e&&Object.keys(e).length?e:(e=Object.entries(t).filter(([t])=>/^__reactEventHandlers/.test(t)).filter(Boolean)[0],e?e[1]:null)};h.prototype.trigger=function(t,s=0){const r="on"+(t[0].toUpperCase()+t.slice(1));return e.act(async()=>{await Promise.all(this.map(async e=>{const s=d(e),i=s.map(t=>[m(t),t]).filter(t=>t[0]).map(t=>[t[0][r],t[1]]).filter(t=>t[0]),o=s=>{const r=new Event(t);return Object.defineProperty(r,"target",{value:e}),Object.defineProperty(r,"currentTarget",{value:s}),r};if(this.events&&this.events[t]){const e=s[s.length-1];this.events[t].map(t=>t(o(e)))}await Promise.all(i.map(([t,e])=>t(o(e))))})),await new Promise(t=>setTimeout(t,s))})},h.prototype.children=function(t="*"){return this.map(e=>[...e.childNodes].filter(e=>e.matches(t)))},h.prototype.closest=function(t="*"){return this.map(e=>e.closest(t))};const y=async t=>{let s=await t();for(;!s;)await e.act(async()=>{var e;await(e=50,new Promise(t=>setTimeout(t,e))),s=await t()});return s};t.default=h,t.until=t=>{return"function"==typeof t?y(t):"object"==typeof t?(e=t,new Proxy(e,{get:(t,s)=>(...t)=>y(()=>e[s](...t))})):void 0;var e},Object.defineProperty(t,"__esModule",{value:!0})}));
