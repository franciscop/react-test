!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react-dom/test-utils"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react-dom/test-utils","react-dom"],e):e((t=t||self).$={},t.testUtils,t.ReactDOM)}(this,(function(t,e,n){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const o=t=>new Promise(e=>setTimeout(e,t)),s=(t,e)=>{let n=t;for(let[t,o]of e)n=n[t](...o);return n};var r=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){if("production"===process.env.NODE_ENV)e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot;else{var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e.createRoot=function(t,e){o.usingClientEntryPoint=!0;try{return n.createRoot(t,e)}finally{o.usingClientEntryPoint=!1}},e.hydrateRoot=function(t,e,s){o.usingClientEntryPoint=!0;try{return n.hydrateRoot(t,e,s)}finally{o.usingClientEntryPoint=!1}}}})),i=r.createRoot;r.hydrateRoot;global.IS_REACT_ACT_ENVIRONMENT=!0;const a=t=>{const n=window.document.createElement("div");n.id="root",n.component=t,window.document.body.appendChild(n);const o=i(n);return n.root=o,e.act(()=>o.render(t)),[...n.childNodes]};var c=t=>t?["string","number","boolean"].includes(typeof t)||t.$$typeof?a(t):(Array.isArray(t)?t:[t]).filter(t=>"object"==typeof t):[],l=t=>{if(!t)throw new Error("expect() should receive an HTMLElement or React Test instance");if(t.$$typeof){t=c(t)[0]}return t.array&&(t=t.array()),Array.isArray(t)||(t=[t]),t.forEach(t=>{if(!t.nodeName)throw new Error("expect() should receive an HTMLElement or React Test instance")}),t},u=t=>t.cloneNode(!1).outerHTML.replace(/<\/[a-zA-Z0-9-]+>$/,"");const f=t=>`class${t.length>1?"es":""} "${t.join('", "')}"`;const p=t=>t.replace(/\s+/g," ");const h=t=>Object.entries(t).map(([t,e])=>{return`${n=t,n.replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1-$2").toLowerCase()}: ${e}`;var n}),d=t=>{let e=t.split("; ");return e[e.length-1]=e[e.length-1].replace(/;/g,""),e},m=t=>`style${t.length>1?"s":""} [${t.join(", ")}]`;expect.extend({toBeEnabled:function(t){this.affirmative=!this.isNot,t=l(t);for(let e of t){const t=u(e),n=!e.disabled;if(this.affirmative&&!n){const e=`Expected ${t} not to include the attribute "disabled"`;return{pass:!1,message:()=>e}}if(this.isNot&&n){const e=`Expected ${t} to include the attribute "disabled"`;return{pass:!0,message:()=>e}}}return{pass:!this.isNot}},toHaveAttribute:function(t,e,n){this.affirmative=!this.isNot,t=l(t);for(let o of t){const t=[...o.attributes],s=u(o),r=t.some(({name:t,value:o})=>e===t&&(n instanceof RegExp?n.test(o):"boolean"==typeof n?""===o:!n||o===n));let i="";if(n instanceof RegExp?i=" that matches "+n:n&&(i=`="${n}"`),this.affirmative&&!r){const t=`Expected ${s} to have attribute \`${e}\`${i}`;return{pass:!1,message:()=>t}}if(this.isNot&&r){const t=`Expected ${s} not to have attribute \`${e}\`${i}`;return{pass:!0,message:()=>t}}}return{pass:!this.isNot}},toHaveClass:function(t,...e){this.affirmative=!this.isNot,t=l(t);const n=e.flat();for(let e of t){const t=[...e.classList],o=u(e),s=n.filter(e=>t.includes(e)),r=n.filter(e=>!t.includes(e));if(this.affirmative&&s.length<n.length){const t=`Expected ${o} to include ${f(r)}`;return{pass:!1,message:()=>t}}if(this.isNot&&s.length){const t=`Expected ${o} not to include ${f(s)}`;return{pass:!0,message:()=>t}}}return{pass:!this.isNot}},toHaveHtml:function(t,e){if(this.affirmative=!this.isNot,t=l(t),"string"!=typeof e){const t="Second argument of .toHaveHtml() needs to be a string";return{pass:!1,message:()=>t}}for(let n of t){const t=n.outerHTML.includes(e.trim());if(this.affirmative&&!t){const t=`Expected ${n.outerHTML} to include ${e}`;return{pass:!1,message:()=>t}}if(this.isNot&&t){const t=`Expected ${n.outerHTML} not to include ${e}`;return{pass:!0,message:()=>t}}}return{pass:!this.isNot}},toHaveText:function(t,e){this.affirmative=!this.isNot,t=l(t);for(let n of t){const t=n.textContent,o=u(n);if(this.affirmative){if(p(t)!==p(e)){const n=`Expected ${o} to have text "${e}" but it received "${t}"`;return{pass:!1,message:()=>n}}}else if(p(t)===p(e)){const e=`Expected ${o} not to have the text "${t}"`;return{pass:!0,message:()=>e}}}return{pass:!this.isNot}},toHaveValue:function(t,e=!0){if(this.affirmative=!this.isNot,(t=l(t)).length>1)throw new Error("Cannot check multiple elements for values. Please pass only one element.");const n=t[0],o=n.tagName.toLowerCase();if("input"===o&&["checkbox","radio"].includes(n.type))throw new Error('Cannot check .toHaveValue() for input type="checkbox" or type="radio".');const s=u(n);let r=!1;if("input"===o)r="number"===n.type?Number(n.value)===e:n.value===e;else if("textarea"===o)r=n.value===e;else{if("select"!==o)throw new Error("Not a valid element that has a value attribute. Please insert an element that has a value.");{const t=[...n.options].find(t=>t.selected);if(t)r=!0===e||t.value===e;else{if(!e){const t=`Expected an option to be selected in ${s} (but none was)`;return{pass:!0,message:()=>t}}r=!1}}}if(this.affirmative&&!r){const t=`Expected ${s} to have value="${e}"`;return{pass:!1,message:()=>t}}if(this.isNot&&r){const t=`Expected ${s} not to have value=${e}`;return{pass:!0,message:()=>t}}return{pass:!this.isNot}},toMatchSelector:function(t,e){this.affirmative=!this.isNot,t=l(t);for(let n of t){const t=u(n),o=n.matches(e);if(this.affirmative&&!o){const n=`Expected ${t} to match selector, ${e}`;return{pass:!1,message:()=>n}}if(this.isNot&&o){const n=`Expected ${t} not to match selector, ${e}`;return{pass:!0,message:()=>n}}}return{pass:!this.isNot}},toHaveStyle:function(t,e){this.affirmative=!this.isNot,t=l(t);for(let n of t){const t=u(n),o=Object.entries(n.style._values).map(([t,e])=>`${t}: ${e}`);let s="string"==typeof e?d(e):h(e);if(this.affirmative){const e=s.filter(t=>!o.includes(t));if(e.length){const n=`Expected ${t} to include ${m(e)}`;return{pass:!1,message:()=>n}}}if(this.isNot){const e=s.filter(t=>o.includes(t));if(e.length){const n=`Expected ${t} not to include ${m(e)}`;return{pass:!0,message:()=>n}}}}return{pass:!this.isNot}}});const y=function(t,e={}){return this instanceof y?(this.events=e.events||{},window.addEventListener=(t,e)=>{this.events[t]=this.events[t]||[],this.events[t].push(e)},document.addEventListener=(t,e)=>{this.events[t]=this.events[t]||[],this.events[t].push(e)},this.nodes=c(t),Object.defineProperty(this,"length",{get:()=>this.nodes.length}),this):new y(t,e)};y.prototype[Symbol.iterator]=function*(){for(let t of this.nodes)yield t},y.prototype.attr=function(t){const e=this.get(0);return e&&e.getAttribute(t)},y.prototype.array=function(t=(t=>t)){if("string"==typeof t){const e=t;t=t=>t[e]}return this.nodes.map(t)},y.prototype.change=function(t){return this.map(e=>{"INPUT"===e.nodeName&&["checkbox","radio"].includes(e.type)?e.checked=t:e.value=t}),this.trigger("change",{target:{value:t}})},y.prototype.children=function(t="*"){return this.map(t=>[...t.children]).filter(t)},y.prototype.click=function(){return this.trigger("click")},y.prototype.closest=function(t="*"){return this.map(e=>e.closest(t))},y.prototype.data=function(t){return this.attr("data-"+t)};y.prototype.delay=async function(t){await e.act(()=>(t=>new Promise(e=>setTimeout(e,t)))(t))},y.prototype.each=function(t=(()=>{})){return this.array(t),this},y.prototype.filter=function(t="*"){if("string"==typeof t){const e=t;t=t=>t.matches(e)}if(t.nodes){const e=t;t=t=>e.nodes.includes(t)}return y(this.array().filter(t),this)},y.prototype.find=function(t){return t?this.map(e=>[...e.querySelectorAll(t)]):this},y.prototype.get=function(t=0){const e=this.array();return e.length?(t%=e.length,e[t=(e.length+t)%e.length]):null},y.prototype.html=function(){const t=this.get(0);return t?t.outerHTML:""},y.prototype.is=function(t="*"){return this.filter(t).length===this.length},y.prototype.map=function(t){const e=[];return this.array(t).map(t=>t&&t.forEach?[...t]:t).flat().forEach(t=>{t&&(e.includes(t)||e.push(t))}),y(e,this)},y.prototype.not=function(t="*"){if("function"==typeof t)throw new Error("A callback is not allowed for .not()");return this.filter(e=>!y(e).is(t))},y.prototype.parent=function(){return this.map(t=>t.parentNode)},y.prototype.props=function(t){const n=this.nodes[0].closest("#root"),o=n.component,s=n.root;return"function"==typeof t&&(t=t(o.props)),e.act(()=>s.render({...o,props:t})),this.nodes=[...n.childNodes],this},y.prototype.render=function(t){const n=this.nodes[0].closest("#root"),o=n.root;return e.act(()=>o.render(t)),this.nodes=[...n.childNodes],this},y.prototype.siblings=function(t){return this.parent().children(t).not(this)},y.prototype.submit=function(){return this.trigger("submit")};y.prototype.text=function(){const t=this.get(0);return t?t.textContent.replace(/\s+/g," "):""};const g=(t,e=[])=>(e.push(t),"BODY"!==t.tagName?g(t.parentNode,e):e),v=t=>{const e=Object.entries(t).filter(([t])=>/^__reactProps/.test(t)).map(t=>t[1]).shift();if(e&&Object.keys(e).length)return e},$=(t,e,...n)=>{const o=(t=>{const e={};return t.forEach(t=>{for(let n in t)if(e[n])for(let o in t[n])e[n][o]=t[n][o];else e[n]=t[n]}),e})([{target:e},...n]),s=new Event(t);for(let t in o)Object.defineProperty(s,t,{value:o[t],enumerable:!0,configurable:!0});return s},E=t=>t[0].toUpperCase()+t.slice(1);y.prototype.trigger=function(t,n={}){const o=("on"+E(t)).replace(/(down|up|left|right|in|out|move)$/i,E);return e.act(async()=>{await Promise.all(this.map(async e=>{const s=g(e);if(this.events&&this.events[t]){const o=s[s.length-1],r=$(t,e,{...n,currentTarget:o});this.events[t].map(t=>t(r))}if(e[t])if("click"===t){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,...n});e.dispatchEvent(t)}else e[t]($(t,e,n));else{const e=s.map(t=>[v(t),t]).filter(t=>t[0]).map(t=>[t[0][o],t[1]]).filter(t=>t[0]).map(([e,o])=>e($(t,o,n)));await Promise.all(e)}}))})},y.prototype.type=async function(t){const e=t.split("").map((e,n)=>t.slice(0,n+1));for(let t of e)await this.change(t),await this.delay(10)},t.act=e.act,t.default=y,t.until=t=>"function"==typeof t?(async t=>{let n=await t();for(;!n;)await e.act(async()=>{await o(50),n=await t()});return n})(t):"object"==typeof t?(t=>{const n=[],r=(i,a)=>"then"===a?async r=>{let i;for(;!i;)await e.act(async()=>{await o(50),i=s(t,n),i&&i.nodes&&!i.nodes.length&&(i=!1)});return r(i)}:(...e)=>(n.push([a,e]),new Proxy(t,{get:r}));return new Proxy(t,{get:r})})(t):void 0,Object.defineProperty(t,"__esModule",{value:!0})}));
